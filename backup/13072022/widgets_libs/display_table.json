{
  "widgetsBundle": {
    "alias": "display_table",
    "title": "Display_Table",
    "image": null,
    "description": null
  },
  "widgetTypes": [
    {
      "alias": "table_display",
      "name": "Table_display",
      "descriptor": {
        "type": "static",
        "sizeX": 16,
        "sizeY": 10,
        "resources": [
          {
            "url": "https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"
          },
          {
            "url": "https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          }
        ],
        "templateHtml": "<button mat-button mat-raised-button color=\"primary\" style=\"margin-right: 20px;\" type=\"button\" id=\"btnShow\">\n            Thêm SP\n        </button>\n<form class=\"hidden\" id=\"formAdd\">\n<table class=\"table\">\n    <tr>\n        <td>Mã sản phẩm</td>\n        <td>\n            <input type=\"text\" name=\"Id\" id=\"txtId\" value=\"\" class=\"form-control\" />\n        </td>\n    </tr>\n    <tr>\n        <td>Tên sản phẩm</td>\n            <td>\n                <input type=\"text\" name=\"Name\" id=\"txtName\" value=\"\" class=\"form-control\"/>\n            </td>\n    </tr>\n    <tr>\n        <td>Trạng thái sử dụng</td>\n        <td>\n            <section>\n                 <mat-radio-button id=\"btn-Active\" style=\"padding-right:20px\" name=\"check\" value=\"Active\">Active</mat-radio-button>\n                  <mat-radio-button id=\"btn-Active\" name=\"check\" value=\"Inactive\">Inactive</mat-radio-button>\n            </section>\n        </td>\n    </tr>\n    <tr>\n        <td>\n            <button mat-button mat-raised-button color=\"primary\" style=\"margin-right: 20px;\" type=\"button\" id=\"btnAdd\">\n            Add\n        </button>\n        <button mat-button mat-raised-button color=\"primary\" style=\"margin-right: 20px;\" type=\"button\" id=\"btnUpdate\">\n            Update\n        </button>\n        </td>\n        <td>\n            \n            <button mat-button mat-raised-button color=\"accent\" style=\"margin-right: 20px;\" type=\"button\" id=\"btnDelete\">\n            Delete\n        </button>\n        </td>\n    </tr>\n</table>\n</form>\n<table id=\"tblCustomers\" class=\"table table-striped table-hover\" cellspacing=\"0\" width=\"100%\">\n  <thead>\n    <tr>\n      <th>Mã sản phẩm</th>\n      <th>Tên sản phẩm</th>\n      <th>Trạng thái</th>\n    </tr>\n  </thead>\n</table>\n<div>\n   <button id = \"saveButton\" type=\"button\" class=\"btn btn-outline-primary\">Lưu</button>\n</div>",
        "templateCss": ".hidden{\n    \n    display: none;\n}\n",
        "controllerScript": "$(function () {\r\n            $('#btnShow').on('click', function(){\r\n                $('#formAdd').removeClass('hidden');\r\n            })\r\n            $('#btnAdd').on('click', function () {\r\n                var name, acitve, id;\r\n                id = $(\"#txtId\").val();\r\n                name = $(\"#txtName\").val();\r\n                active = $('#btn-Active[name=sex]:checked').val();\r\n                var edit = \"<a class='edit' href='JavaScript:void(0);' >Edit</a>\";\r\n                var del = \"<a class='delete' href='JavaScript:void(0);'>Delete</a>\";\r\n \r\n                if (name == \"\" || id == \"\") {\r\n                    alert(\"Name and Code fields required!\");\r\n                } else {\r\n                    var table = \"<tr><td>\" + id + \"</td><td>\" + name + \"</td><td>\" + active + \"</td><td>\" + edit + \"</td><td>\" + del + \"</td></tr>\";\r\n                    $(\"#tblCustomers\").append(table);\r\n                }\r\n                id = $(\"#txtId\").val(\"\");\r\n                name = $(\"#txtName\").val(\"\");\r\n                active = $(\"#btn-Active\").val(\"\");\r\n                Clear();\r\n            });\r\n \r\n            $('#btnUpdate').on('click', function () {\r\n                var name, active, id;\r\n                id = $(\"#txtId\").val();\r\n                name = $(\"#txtName\").val();\r\n                active = $('#btn-Active[name=sex]:checked').val();\r\n \r\n                $('#tblCustomers tbody tr').eq($('#hfRowIndex').val()).find('td').eq(1).html(name);\r\n                $('#tblCustomers tbody tr').eq($('#hfRowIndex').val()).find('td').eq(2).html(id)\r\n \r\n                $('#btnAdd').show();\r\n                $('#btnUpdate').hide();\r\n                Clear();\r\n            });\r\n \r\n            $(\"#tblCustomers\").on(\"click\", \".delete\", function (e) {\r\n                if (confirm(\"Are you sure want to delete this record!\")) {\r\n                    $(this).closest('tr').remove();\r\n                } else {\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n \r\n            $('#btnClear').on('click', function () {\r\n                Clear();\r\n            });\r\n \r\n            $(\"#tblCustomers\").on(\"click\", \".edit\", function (e) {\r\n                var row = $(this).closest('tr');\r\n                $('#hfRowIndex').val($(row).index());\r\n                var td = $(row).find(\"td\");\r\n                $('#txtId').val($(td).eq(0).html());\r\n                $('#txtName').val($(td).eq(1).html());\r\n                $('#btn-Active[name=sex]:checked').val($(td).eq(2).html());\r\n                $('#btnAdd').hide();\r\n                $('#btnUpdate').show();\r\n            });\r\n        });\r\n        function Clear() {\r\n            $(\"#txtId\").val(\"\");\r\n            $(\"#txtName\").val(\"\");\r\n            $('#btn-Active[name=sex]:checked').val(\"\");\r\n            $(\"#hfRowIndex\").val(\"\");\r\n        }",
        "settingsSchema": "{\n    \"schema\": {\n        \"type\": \"object\",\n        \"title\": \"Settings\",\n        \"required\": [\"cardHtml\"],\n        \"properties\": {\n            \"cardCss\": {\n                \"title\": \"CSS\",\n                \"type\": \"string\",\n                \"default\": \".card {\\n font-weight: bold; \\n}\"\n            },\n            \"cardHtml\": {\n                \"title\": \"HTML\",\n                \"type\": \"string\",\n                \"default\": \"<div class='card'>HTML code here</div>\"\n            }\n        }\n    },\n    \"form\": [\n        {\n            \"key\": \"cardCss\",\n            \"type\": \"css\"\n        },           \n        {\n            \"key\": \"cardHtml\",\n            \"type\": \"html\"\n        }    \n    ]\n}",
        "dataKeySettingsSchema": "{}\n",
        "defaultConfig": "{\"datasources\":[{\"type\":\"static\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"rgb(255, 255, 255)\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"cardCss\":\".card {\\n    font-weight: bold;\\n    font-size: 32px;\\n    color: #999;\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n}\",\"cardHtml\":\"<table border=\\\"0\\\" class=\\\"table table-striped\\\">\\n    <thead>\\n    <tr>\\n        <th>STT</th>\\n        <th>Mã sản phẩm</th>\\n        <th>Tên sản phẩm</th>\\n        <th>Chức năng</th>\\n    </tr>\\n    </thead>\\n    <tbody>\\n<script type=\\\"text/javascript\\\">\\n    var productList= [\\n    {\\n      \\\"productCode\\\": \\\"Code_001\\\",\\n      \\\"productName\\\": \\\"Name_001\\\"\\n    },\\n    {\\n      \\\"productCode\\\": \\\"Code_002\\\",\\n      \\\"productName\\\": \\\"Name_002\\\"\\n    },\\n    {\\n      \\\"productCode\\\": \\\"Code_003\\\",\\n      \\\"productName\\\": \\\"Name_003\\\"\\n    }\\n  ]\\n  \\n  for(let i=0;i<productList.length;i++) {\\n\\t\\tdocument.writeln(`<tr>\\n\\t\\t\\t\\t<td>${i+1}</td>\\n\\t\\t\\t\\t<td>${productList[i].productCode}</td>\\n\\t\\t\\t\\t<td>${productList[i].productName}</td>\\n\\t\\t\\t\\t<td></td>\\n\\t\\t\\t\\t\\n\\t\\t\\t</tr>`)\\n</script>\\n</tbody>\\n</table>\"},\"title\":\"Table_display\",\"dropShadow\":true}"
      },
      "image": null,
      "description": null
    }
  ]
}